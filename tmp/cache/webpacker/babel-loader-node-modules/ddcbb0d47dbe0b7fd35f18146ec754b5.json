{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar headers = {\n  'Accept': 'application/json',\n  'Content-Type': 'application/json',\n  'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')\n};\nexport default {\n  props: ['items', 'assignee', 'loading'],\n  data: function data() {\n    return {\n      newItem: '',\n      add_new_btn_load: false\n    };\n  },\n  created: function created() {//fetch('/todos')\n    //  .then((response) => response.json())\n    //  .then((data) => this.items = data)\n  },\n  methods: {\n    get_month_day: function get_month_day(date) {\n      var date = new Date(date);\n      return date.getDate() + ' ' + date.toLocaleString('default', {\n        month: 'short'\n      }) + ' ' + date.getFullYear();\n    },\n    status_class: function status_class(item) {\n      return item.status == \"done\" ? true : false;\n    },\n    get_status: function get_status(item) {\n      return item.status == \"todo\" ? 0 : 1;\n    },\n    addItem: function addItem() {\n      var _this = this;\n\n      var vm = this;\n      this.add_new_btn_load = true;\n      fetch('/todos', {\n        method: 'POST',\n        body: JSON.stringify({\n          body: vm.newItem,\n          assignee: vm.assignee\n        }),\n        headers: headers\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        vm.items.unshift({\n          id: data.id,\n          body: data.body,\n          status: data.status,\n          ruser: data.ruser,\n          created_at: data.created_at\n        });\n        _this.add_new_btn_load = false;\n        vm.newItem = '';\n      });\n    },\n    deleteItem: function deleteItem(itemId, index) {\n      var _this2 = this;\n\n      fetch(\"/todos/\".concat(itemId), {\n        method: 'DELETE'\n      }).then(function () {\n        _this2.items.splice(index, 1);\n      });\n    },\n    updateItem: function updateItem(item) {\n      fetch(\"/todos/\".concat(item.id), {\n        method: 'PUT',\n        body: JSON.stringify({\n          body: item.body\n        }),\n        headers: headers\n      });\n    },\n    ItemStatus: function ItemStatus(item, event) {\n      var value = event.target.checked ? 1 : 0;\n\n      if (event.target.checked) {\n        $(event.target).parent().parent().addClass('low_opac');\n      } else {\n        $(event.target).parent().parent().removeClass('low_opac');\n      }\n\n      fetch(\"/todos/update_status/\".concat(item.id), {\n        method: 'PUT',\n        body: JSON.stringify({\n          status: value\n        }),\n        headers: headers\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {});\n    }\n  }\n};","map":{"version":3,"sources":["todos.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"col-md-12 mgtop20p\">\n    <div>\n      <div v-if=\"loading\">\n        <div class=\"loader\">Loading...</div>\n      </div>\n      <div v-else>\n        <div class=\"todo-wrapper\">\n          <div v-if=\"items.length == 0\">\n            <p>There are no Todos</p>\n          </div>\n          <div v-else v-for=\"(item, index) in items\" :key=\"item.id\" class=\"row col-md-6 todo-box\" :class=\"{'low_opac': status_class(item)}\">\n            <div class=\"col-md-6\">\n              <textarea v-model=\"item.body\" v-on:change=\"updateItem(item)\" class=\"form-control\"></textarea>\n            </div>\n            <div class=\"col-md-1\">\n              <input type=\"checkbox\" v-on:change=\"ItemStatus(item, $event)\" :checked=\"get_status(item)\">\n            </div>\n            <div class=\"col-md-2\">\n              <button v-on:click=\"updateItem(item)\" class=\"btn btn-primary\">Update</button>\n            </div>\n            <div class=\"col-md-1\">\n              <button v-on:click=\"deleteItem(item.id, index)\" class=\"btn btn-danger\">X</button>\n            </div>\n            <div class=\"todo-ruser\">\n              {{item.ruser.username}} on {{get_month_day(item.created_at)}}\n            </div>\n          </div>\n        </div>\n        <div class=\"\">\n          <div class=\"row mgtop20p\">\n            <div class=\"col-md-8\">\n              <textarea v-model=\"newItem\" class=\"form-control\" placeholder=\"Add new item...\"></textarea>\n              <input type=\"hidden\" v-model=\"assignee\">\n            </div>\n            <div class=\"col-md-1\">\n              <button v-on:click=\"addItem\" class=\"btn btn-success sq_btn\"><span v-if=\"add_new_btn_load\"><div class=\"buttonloader\">Loading...</div></span><span v-else>Add</span></button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  const headers = {\n  'Accept': 'application/json',\n  'Content-Type': 'application/json',\n  'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')\n  }\n\n  export default {\n    props:['items', 'assignee', 'loading'],\n    data: () => {\n      return {\n        newItem: '',\n        add_new_btn_load: false\n      }\n    },\n    created: function() {\n      //fetch('/todos')\n      //  .then((response) => response.json())\n      //  .then((data) => this.items = data)\n    },\n    methods: {\n      get_month_day: function(date){\n        var date = new Date(date);\n        return date.getDate()+ ' ' + date.toLocaleString('default', { month: 'short' }) + ' ' + date.getFullYear()\n      },\n      status_class: function(item){\n        return item.status == \"done\" ? true : false\n      },\n      get_status: function(item) {\n        return item.status == \"todo\" ? 0 : 1\n      },\n      addItem: function(){\n      let vm = this;\n      this.add_new_btn_load= true;\n        fetch('/todos', {\n            method: 'POST',\n            body: JSON.stringify({ body: vm.newItem, assignee: vm.assignee }),\n            headers: headers })\n        .then((response) => response.json())\n        .then((data) => {\n          vm.items.unshift({\n            id: data.id,\n            body: data.body,\n            status: data.status,\n            ruser: data.ruser,\n            created_at: data.created_at\n          })\n          this.add_new_btn_load= false;\n          vm.newItem = ''\n        })\n      },\n      deleteItem: function(itemId, index){\n        fetch(`/todos/${itemId}`, { method: 'DELETE' })\n        .then(() => {\n          this.items.splice(index, 1)\n        })\n      },\n      updateItem: function(item){\n        fetch(`/todos/${item.id}`, {\n        method: 'PUT',\n        body: JSON.stringify({ body: item.body}),\n        headers: headers })\n      },\n      ItemStatus: function(item, event){\n        var value = event.target.checked ? 1 : 0;\n        if(event.target.checked){\n          $(event.target).parent().parent().addClass('low_opac');\n        }else{\n          $(event.target).parent().parent().removeClass('low_opac');\n        }\n        fetch(`/todos/update_status/${item.id}`, {\n        method: 'PUT',\n        body: JSON.stringify({ status: value}),\n        headers: headers })\n        .then((response) => response.json())\n        .then((data) => {\n        })\n      }\n    }\n  }\n</script>\n"],"sourceRoot":"app/javascript/components"},"metadata":{},"sourceType":"module"}